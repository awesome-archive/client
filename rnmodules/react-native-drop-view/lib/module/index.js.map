{"version":3,"names":["React","View","requireNativeComponent","UIManager","Platform","LINKING_ERROR","select","ios","default","ComponentName","isSupported","OS","IMPL","getViewManagerConfig","Error","DropViewWrapper","p","onDropped","onDroppedCB","useCallback","e","manifest","nativeEvent","cleanedUp","reduce","arr","item","originalPath","content","push","Array","console","log"],"sources":["index.tsx"],"sourcesContent":["import * as React from 'react'\nimport {\n    View,\n    requireNativeComponent,\n    UIManager,\n    Platform,\n    ViewStyle,\n} from 'react-native';\n\nconst LINKING_ERROR =\n    `The package 'react-native-drop-view' doesn't seem to be linked. Make sure: \\n\\n` +\n    Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n    '- You rebuilt the app after installing the package\\n' +\n    '- You are not using Expo managed workflow\\n';\n\nexport type DropItems = Array<{ originalPath?: string; content?: string }>\nexport type Props = {\n    children?: React.ReactNode\n    onDropped: (items: DropItems) => void\n    style?: ViewStyle;\n}\n\nconst ComponentName = 'DropView';\nconst isSupported = Platform.OS === 'ios'\nconst IMPL =\n    isSupported ?\n        UIManager.getViewManagerConfig(ComponentName) != null\n            ? requireNativeComponent<Props>(ComponentName)\n            : () => {\n                throw new Error(LINKING_ERROR);\n            }\n        : null\n\nconst DropViewWrapper = (p: Props) => {\n    const { onDropped } = p\n    const onDroppedCB = React.useCallback(\n        (e: any) => {\n            try {\n                const manifest = e.nativeEvent.manifest as DropItems\n                const cleanedUp = manifest.reduce((arr, item) => {\n                    if (item.originalPath || item.content) {\n                        arr.push(item)\n                    }\n                    return arr\n                }, new Array<DropItems[0]>())\n                onDropped(cleanedUp)\n            } catch (e) {\n                console.log('drop view error', e)\n            }\n        },\n        [onDropped]\n    )\n    // @ts-ignore\n    return <IMPL {...p} onDropped={onDroppedCB} />\n}\nexport default isSupported ? DropViewWrapper : View\n"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SACIC,IADJ,EAEIC,sBAFJ,EAGIC,SAHJ,EAIIC,QAJJ,QAMO,cANP;AAQA,MAAMC,aAAa,GACd,iFAAD,GACAD,QAAQ,CAACE,MAAT,CAAgB;EAAEC,GAAG,EAAE,gCAAP;EAAyCC,OAAO,EAAE;AAAlD,CAAhB,CADA,GAEA,sDAFA,GAGA,6CAJJ;AAaA,MAAMC,aAAa,GAAG,UAAtB;AACA,MAAMC,WAAW,GAAGN,QAAQ,CAACO,EAAT,KAAgB,KAApC;AACA,MAAMC,IAAI,GACNF,WAAW,GACPP,SAAS,CAACU,oBAAV,CAA+BJ,aAA/B,KAAiD,IAAjD,GACMP,sBAAsB,CAAQO,aAAR,CAD5B,GAEM,MAAM;EACJ,MAAM,IAAIK,KAAJ,CAAUT,aAAV,CAAN;AACH,CALE,GAML,IAPV;;AASA,MAAMU,eAAe,GAAIC,CAAD,IAAc;EAClC,MAAM;IAAEC;EAAF,IAAgBD,CAAtB;EACA,MAAME,WAAW,GAAGlB,KAAK,CAACmB,WAAN,CACfC,CAAD,IAAY;IACR,IAAI;MACA,MAAMC,QAAQ,GAAGD,CAAC,CAACE,WAAF,CAAcD,QAA/B;MACA,MAAME,SAAS,GAAGF,QAAQ,CAACG,MAAT,CAAgB,CAACC,GAAD,EAAMC,IAAN,KAAe;QAC7C,IAAIA,IAAI,CAACC,YAAL,IAAqBD,IAAI,CAACE,OAA9B,EAAuC;UACnCH,GAAG,CAACI,IAAJ,CAASH,IAAT;QACH;;QACD,OAAOD,GAAP;MACH,CALiB,EAKf,IAAIK,KAAJ,EALe,CAAlB;MAMAb,SAAS,CAACM,SAAD,CAAT;IACH,CATD,CASE,OAAOH,CAAP,EAAU;MACRW,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BZ,CAA/B;IACH;EACJ,CAde,EAehB,CAACH,SAAD,CAfgB,CAApB,CAFkC,CAmBlC;;EACA,oBAAO,oBAAC,IAAD,eAAUD,CAAV;IAAa,SAAS,EAAEE;EAAxB,GAAP;AACH,CArBD;;AAsBA,eAAeR,WAAW,GAAGK,eAAH,GAAqBd,IAA/C"}